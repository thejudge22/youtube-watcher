FROM python:3.11-slim
WORKDIR /app

# Install sqlite3 and upgrade pip
RUN apt-get update && apt-get install -y sqlite3 && pip install --upgrade pip

# Copy both requirement files for development
COPY backend/requirements.txt backend/requirements-dev.txt ./

# Install development dependencies (includes production deps via -r)
RUN pip install --no-cache-dir -r requirements-dev.txt pip-audit
